<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'"
    />
    <title>Glabix Screen Recorder</title>
  </head>

  <body>
    <div class="page-backdrop"></div>

    <div id="draw-container"></div>

    <div class="controls" hidden>
      <div id="recordTimer">00:00</div>
    </div>

    <div class="panel-wrapper">
      <div class="panel-drag-icon">
        <i class="i i--lg i-grip-horizontal"></i>
      </div>
      <div id="panel-controls" class="panel transition-visibility">
        <button id="stopBtn" class="panel-btn mb-2 flex-center-10">
          <span class="i i-stop i--lg"></span>
        </button>
        <div id="timerDisplay" class="mb-2 text-center text-gray-600 text-xs">
          00:00
        </div>
        <button id="pauseBtn" class="panel-btn mb-2 flex-center-10">
          <span class="i i-pause i--lg"></span>
        </button>
        <button
          id="resumeBtn"
          class="panel-btn mb-2 panel-btn--play flex-center-10"
          hidden
        >
          <span class="i i-play i--lg"></span>
        </button>
        <div class="panel-divider"></div>
        <button id="draw-toggle" class="panel-btn flex-center-10 clickable">
          <span class="i i-pencil-mechanical i--lg"></span>
        </button>
      </div>

      <div id="panel-draw" class="panel transition-visibility invisible p-4">
        <div class="flex gap-4 mb-4">
          <div class="flex flex-col gap-2">
            <button
              class="bullet-xl hover:scale-125 text-accent-13"
              data-color="accent-13"
            ></button>
            <button
              class="bullet-xl hover:scale-125 text-warning"
              data-color="warning"
            ></button>
            <button
              class="bullet-xl hover:scale-125 text-accent-18"
              data-color="accent-18"
            ></button>
            <button
              class="bullet-xl hover:scale-125 text-accent-16"
              data-color="accent-16"
            ></button>
            <button
              class="bullet-xl hover:scale-125 text-accent-19"
              data-color="accent-19"
            ></button>
            <button
              class="bullet-xl hover:scale-125 text-light border border-gray-300"
              data-color="light"
            ></button>
            <button
              class="bullet-xl hover:scale-125 text-dark"
              data-color="dark"
            ></button>
          </div>
          <input
            class="panel-slider"
            type="range"
            orient="vertical"
            min="1"
            max="25"
          />
        </div>

        <button class="panel-btn clickable" id="panel-draw-close-btn">
          Готово
        </button>
      </div>
    </div>

    <canvas id="canvas" width="300" height="300"></canvas>

    <div class="crop-screen-container" hidden>
      <div id="crop_video_screen" class="screen-recorder-container">
        <canvas></canvas>
      </div>
    </div>

    <div class="webcamera-only-container sm" hidden>
      <div class="webcamera-only-title">
        <i class="i i-dot i--lg"></i>
        <div class="fw-500">Запись только камеры</div>
      </div>
      <video id="webcam_only_video" autoplay></video>
      <div class="webcamera-only-menu-container">
        <div class="webcamera-only-menu webcamera-only-menu-more">
          <div class="flex-center-6 min-w-6">
            <i class="i i--lg i-ellipsis"></i>
          </div>
        </div>
        <div class="webcamera-only-menu webcamera-only-menu-actions">
          <button
            class="flex-center-6 min-w-6 js-camera-only-size"
            data-size="sm"
          >
            <i class="i pointer-events-none text-gray-600 i--lg i-rect"></i>
          </button>
          <button
            class="flex-center-6 min-w-6 js-camera-only-size"
            data-size="lg"
          >
            <i class="i pointer-events-none text-gray-600 i--xl i-rect"></i>
          </button>
          <button
            class="flex-center-6 min-w-6 js-camera-only-size"
            data-size="xl"
          >
            <i class="i pointer-events-none text-gray-600 i--lg i-expand"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="fullscreen-countdown-container" hidden>
      <div class="fullscreen-countdown">
        <div id="fullscreen_countdown">3</div>
      </div>
    </div>

    <div id="webcamera-view" class="webcamera-view-container sm" hidden>
      <video id="video" autoplay></video>
      <div class="webcamera-view-menu-container">
        <div class="webcamera-view-menu webcamera-view-menu-more">
          <div class="flex-center-6 min-w-6">
            <i class="i i--lg i-ellipsis"></i>
          </div>
        </div>
        <div class="webcamera-view-menu webcamera-view-menu-actions">
          <button
            class="flex-center-6 min-w-6 js-camera-view-size"
            data-size="sm"
          >
            <i class="i pointer-events-none text-gray-600 i--lg i-dot"></i>
          </button>
          <button
            class="flex-center-6 min-w-6 js-camera-view-size"
            data-size="lg"
          >
            <i class="i pointer-events-none text-gray-600 i--xl i-dot"></i>
          </button>
          <button
            class="flex-center-6 min-w-6 js-camera-view-size"
            data-size="xl"
          >
            <i class="i pointer-events-none text-gray-600 i--lg i-expand"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- You can also require other files to run in this process -->
    <script type="module" src="/src/renderer.ts"></script>
    <script type="module" src="/src/recorder.renderer.ts"></script>
    <script type="module" src="/src/webcamera.renderer.ts"></script>
    <script type="module" src="/src/draw.renderer.ts"></script>
  </body>
</html>
